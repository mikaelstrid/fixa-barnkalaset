!function e(t,n,a){function o(i,s){if(!n[i]){if(!t[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(r)return r(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return o(n||e)},c,c.exports,e,t,n,a)}return n[i].exports}for(var r="function"==typeof require&&require,i=0;i<a.length;i++)o(a[i]);return o}({1:[function(e,t,n){"use strict";function a(){console.log("Starting admin bootstrapping procedure..."),$(".pxl-admin-page--cities-create").length>0&&(console.log('Found "create city page", start bootstrapping it...'),(new o.CreateCityPage).initPage(),console.log('Bootstrapping "create city page" finished.'));var e=$(".pxl-admin-page--cities-edit");e.length>0&&(console.log('Found "edit city page", start bootstrapping it...'),(new r.EditCityPage).initPage(e.data("latitude"),e.data("longitude")),console.log('Bootstrapping "edit city page" finished.')),$(".pxl-admin-page--arrangements-create").length>0&&(console.log('Found "create arrangement page", start bootstrapping it...'),(new i.CreateArrangementPage).initPage(),console.log('Bootstrapping "create arrangement page" finished.'));var t=$(".pxl-admin-page--arrangements-edit");t.length>0&&(console.log('Found "edit arrangement page", start bootstrapping it...'),(new s.EditArrangementPage).initPage(t.data("latitude"),t.data("longitude")),console.log('Bootstrapping "edit arrangement page" finished.')),console.log("Bootstrapping admin procedure finished.")}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./pages/createCityPage"),r=e("./pages/editCityPage"),i=e("./pages/createArrangementPage"),s=e("./pages/editArrangementPage");$(document).ready(function(){a()})},{"./pages/createArrangementPage":2,"./pages/createCityPage":3,"./pages/editArrangementPage":6,"./pages/editCityPage":7}],2:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(n,"__esModule",{value:!0});var s=e("./createOrEditArrangementPageBase"),l=e("../utilities/slugify"),u=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,s.CreateOrEditArrangementPageBase),i(t,[{key:"initPage",value:function(){$("#Name").change(function(){$("#Slug").val(l.slugify($(this).val().toString()))}),$("select.dropdown").dropdown(),CKEDITOR.replace("Description"),CKEDITOR.replace("BookingConditions"),CKEDITOR.replace("PriceInformation"),this.initMap()}}]),t}();n.CreateArrangementPage=u},{"../utilities/slugify":10,"./createOrEditArrangementPageBase":4}],3:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(n,"__esModule",{value:!0});var s=e("./createOrEditCityPageBase"),l=e("../utilities/slugify"),u=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,s.CreateOrEditCityPageBase),i(t,[{key:"initPage",value:function(){console.log("CreateCityPage.initPage"),$("#Name").change(function(){$("#Slug").val(l.slugify($(this).val().toString()))}),this.initMap()}}]),t}();n.CreateCityPage=u},{"../utilities/slugify":10,"./createOrEditCityPageBase":5}],4:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(n,"__esModule",{value:!0});var r=e("../utilities/constants"),i=e("../utilities/googleMapsUtilities"),s=function(){function e(){a(this,e)}return o(e,[{key:"initMap",value:function(){var e=this;this.mapElement=$("#map")[0],this.geocoder=new google.maps.Geocoder,this.map=new google.maps.Map(this.mapElement,{zoom:4,center:{lat:63,lng:17}}),this.placesService=new google.maps.places.PlacesService(this.map),this.initialLatitude&&this.initialLongitude&&this.updateMap(new google.maps.LatLng(this.initialLatitude,this.initialLongitude)),$("#btnGetCoordinatesFromAddress").click(function(){var t=e.getLookupAddress();return e.geocoder.geocode({address:t},function(t,n){n===google.maps.GeocoderStatus.OK?(e.updateMap(t[0].geometry.location),e.updateLatLngTextboxes(t[0].geometry.location)):console.log("Kunde inte hitta position pga "+n)}),!1}),$("#btnGetInformationFromGooglePlaces").click(function(){var t=$("#Name").val().toString();return!!t&&(e.placesService.textSearch({query:t},function(n,a){if(a===google.maps.places.PlacesServiceStatus.OK){console.log("\"Träffar på '"+t+"':\"");for(var o=0;o<n.length;o++)console.log("\t"+n[o].name);e.placesService.getDetails({placeId:n[0].place_id},function(t,a){a===google.maps.places.PlacesServiceStatus.OK?e.updateInformationFromGooglePlaces(t):console.log("\"Kunde inte hämta detailjer för '"+n[0].place_id+"' pga "+a+'"')})}else console.log("\"Inga träffar på '"+t+"' pga "+a+'"')}),!1)}),$("#btnOpenCoverImage").click(function(){var e=$("#CoverImage").val().toString();return e&&$("<a>").attr("href",e).attr("target","_blank")[0].click(),!1}),$("#btnGetImagesFromGooglePlaces").click(function(){var t=$("#GooglePlacesId").val();return t?(e.placesService.getDetails({placeId:t.toString()},function(n,a){a===google.maps.places.PlacesServiceStatus.OK?e.updateImageList(n,!1):console.log("\"Kunde inte hämta detailjer för '"+t+"' pga "+a+'"')}),!1):(console.log("No Google Places id specified"),!1)}),$("#btnOpenWebsite").click(function(){return $("<a>").attr("href",$("#Website").val().toString()).attr("target","_blank")[0].click(),!1})}},{key:"updateInformationFromGooglePlaces",value:function(e){$("#GooglePlacesId").val(e.place_id),this.updateImageList(e,!0),this.updateStreetAddress(e.address_components,"StreetAddress"),this.updateAddressComponent(e.address_components,"postal_code","PostalCode"),this.updateAddressComponent(e.address_components,"postal_town","PostalCity"),this.updateAddressComponent(e.address_components,"street_address","StreetAddress"),$("#PhoneNumber").val(e.formatted_phone_number),$("#Website").val(e.website.replace(/\/+$/,"")),e.geometry&&e.geometry.location&&(this.updateLatLngTextboxes(e.geometry.location),this.updateMap(e.geometry.location)),$("#GooglePlacesName").text(e.name),$.get("/api/cities/closest?latitude="+e.geometry.location.lat()+"&longitude="+e.geometry.location.lng(),function(e){$("#CitySlug").val(e.slug)})}},{key:"updateImageList",value:function(e,t){var n=this,a=$("#lstImagesFromGooglePlaces");if(a.addClass("hidden"),a.empty(),e.photos.length>0){a.removeClass("hidden");var o=!0,r=!1,i=void 0;try{for(var s,l=e.photos[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;a.append('<img \n                    class="ui image"\n                    data-url="'+u.getUrl({maxWidth:812})+'" src="'+u.getUrl({maxWidth:600,maxHeight:600})+'"\n                    data-html="'+this.makeAttributionsHtmlList(u.html_attributions)+'"\n                >')}}catch(e){r=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw i}}$("#lstImagesFromGooglePlaces .image").popup(),$("#lstImagesFromGooglePlaces .image").click(function(e){return n.updateCoverImageUrl($(e.currentTarget).data("url")),n.updateCoverImageAttributions($(e.currentTarget).data("html")),!1}),t&&(this.updateCoverImageUrl(e.photos[0].getUrl({maxWidth:812})),this.updateCoverImageAttributions(this.makeAttributionsHtmlList(e.photos[0].html_attributions)))}}},{key:"makeAttributionsHtmlList",value:function(e){var t="",n=!0,a=!1,o=void 0;try{for(var r,i=e[Symbol.iterator]();!(n=(r=i.next()).done);n=!0)t+=r.value+", "}catch(e){a=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw o}}return t.length>=2&&(t=t.substring(0,t.length-2)),t.replace(/"/g,"'")}},{key:"updateCoverImageUrl",value:function(e){$("#CoverImage").val(e)}},{key:"updateCoverImageAttributions",value:function(e){$("#CoverImageAttributions").val(e)}},{key:"updateAddressComponent",value:function(e,t,n){var a=i.GoogleMapsUtilties.getAddressComponent(e,t);a&&$("#"+n).val(a)}},{key:"updateStreetAddress",value:function(e,t){var n=i.GoogleMapsUtilties.getAddressComponent(e,"street_address"),a=i.GoogleMapsUtilties.getAddressComponent(e,"route"),o=i.GoogleMapsUtilties.getAddressComponent(e,"street_number"),r=n||a;o&&(r=r+" "+o),$("#"+t).val(r)}},{key:"getLookupAddress",value:function(){return $("#StreetAddress").val()+", "+$("#PostalCode").val()+" "+$("#PostalCity").val()}},{key:"updateMap",value:function(e){var t=this;this.marker?this.marker.setPosition(e):(this.marker=new google.maps.Marker({map:this.map,position:e,draggable:!0}),this.marker.addListener("dragend",function(e){t.updateLatLngTextboxes(e.latLng)}),this.map.setZoom(11)),this.map.setCenter(e)}},{key:"updateLatLngTextboxes",value:function(e){$("#Latitude").val(e.lat().toLocaleString(r.Constants.locale,{maximumFractionDigits:14})),$("#Longitude").val(e.lng().toLocaleString(r.Constants.locale,{maximumFractionDigits:14}))}}]),e}();n.CreateOrEditArrangementPageBase=s},{"../utilities/constants":8,"../utilities/googleMapsUtilities":9}],5:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(n,"__esModule",{value:!0});var r=e("../utilities/constants"),i=function(){function e(){a(this,e)}return o(e,[{key:"initMap",value:function(){var e=this;this.mapElement=$("#map")[0],this.geocoder=new google.maps.Geocoder,this.map=new google.maps.Map(this.mapElement,{zoom:4,center:{lat:63,lng:17}}),this.initialLatitude&&this.initialLongitude&&this.updateMap(new google.maps.LatLng(this.initialLatitude,this.initialLongitude)),$("#btnGetCoordinatesFromName").click(function(){var t=e.getLookupAddress();return e.geocoder.geocode({address:t},function(t,n){n===google.maps.GeocoderStatus.OK?(e.updateMap(t[0].geometry.location),e.updateLatLngTextboxes(t[0].geometry.location)):console.log("Kunde inte hitta position pga "+n)}),!1})}},{key:"getLookupAddress",value:function(){return $("#Name").val().toString()}},{key:"updateMap",value:function(e){var t=this;this.marker?this.marker.setPosition(e):(this.marker=new google.maps.Marker({map:this.map,position:e,draggable:!0}),this.marker.addListener("dragend",function(e){t.updateLatLngTextboxes(e.latLng)}),this.map.setZoom(11)),this.map.setCenter(e)}},{key:"updateLatLngTextboxes",value:function(e){$("#Latitude").val(e.lat().toLocaleString(r.Constants.locale,{maximumFractionDigits:14})),$("#Longitude").val(e.lng().toLocaleString(r.Constants.locale,{maximumFractionDigits:14}))}}]),e}();n.CreateOrEditCityPageBase=i},{"../utilities/constants":8}],6:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(n,"__esModule",{value:!0});var s=e("./createOrEditArrangementPageBase"),l=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,s.CreateOrEditArrangementPageBase),i(t,[{key:"initPage",value:function(e,t){$("select.dropdown").dropdown(),CKEDITOR.replace("Description"),CKEDITOR.replace("BookingConditions"),CKEDITOR.replace("PriceInformation"),this.initialLatitude=e,this.initialLongitude=t,this.initMap()}}]),t}();n.EditArrangementPage=l},{"./createOrEditArrangementPageBase":4}],7:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(n,"__esModule",{value:!0});var s=e("./createOrEditCityPageBase"),l=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,s.CreateOrEditCityPageBase),i(t,[{key:"initPage",value:function(e,t){console.log("EditCityPage.initPage",e,t),this.initialLatitude=e,this.initialLongitude=t,this.initMap()}}]),t}();n.EditCityPage=l},{"./createOrEditCityPageBase":5}],8:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function e(){a(this,e)};o.locale="sv",n.Constants=o},{}],9:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(){a(this,e)}return o(e,null,[{key:"getAddressComponent",value:function(e,t){for(var n=0;n<e.length;n++)for(var a=e[n],o=0;o<a.types.length;o++)if(a.types[o]===t)return a.long_name}}]),e}();n.GoogleMapsUtilties=r},{}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.slugify=function(e){var t="àáåäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ·/_,:;",n=new RegExp(t.split("").join("|"),"g");return e.toString().toLowerCase().replace(/\s+/g,"-").replace(n,function(e){return"aaaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------".charAt(t.indexOf(e))}).replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}},{}],11:[function(e,t,n){"use strict";function a(){console.log("Starting public bootstrapping procedure..."),$(".pxl-public-page--arrangements-index").length>0&&(console.log('Found "index arrangements page", start bootstrapping it...'),(new o.IndexArrangementsPage).initPage(),console.log('Bootstrapping "index arrangements page" finished.')),console.log("Bootstrapping public procedure finished.")}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./pages/indexArrangementsPage");$(document).ready(function(){a()})},{"./pages/indexArrangementsPage":12}],12:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(){a(this,e)}return o(e,[{key:"initPage",value:function(){console.log("IndexArrangementsPage.initPage"),$("select#typeFilter").change(function(e){var t=$(this).val();0==t.length?$(".pxl-arrangement").show():$(".pxl-arrangement").each(function(){for(var e=!1,n=0;!e&&n<t.length;n++)$(this).data("type")===t[n]&&(e=!0);$(this).toggle(e)})})}}]),e}();n.IndexArrangementsPage=r},{}]},{},[1,11]);
//# sourceMappingURL=bundle.min.js.map

{"version":3,"sources":["node_modules/browser-pack/_prelude.js","app/scripts/admin/main.ts","app/scripts/admin/pages/createCityPage.ts","app/scripts/admin/pages/createOrEditCityPageBase.ts","app/scripts/admin/utilities/constants.ts","app/scripts/admin/utilities/slugify.ts"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","bootstrap","log","$","createCityPage_1","CreateCityPage","initPage","document","ready","createOrEditCityPageBase_1","slugify_1","_createOrEditCityPage","CreateOrEditCityPageBase","change","val","slugify","this","initMap","constants_1","mapElement","geocoder","google","maps","Geocoder","map","Map","lat","lng","initialLatitude","initialLongitude","updateMap","LatLng","click","lookupAddress","_this","getLookupAddress","geocode","address","results","status","GeocoderStatus","OK","geometry","location","updateLatLngTextboxes","marker","setPosition","Marker","addListener","ev","latLng","setZoom","setCenter","toLocaleString","Constants","locale","maximumFractionDigits","text","p","RegExp","split","join","toString","toLowerCase","replace","c","charAt","indexOf"],"mappings":"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","file":"bundle.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","﻿import { CreateCityPage } from \"./pages/createCityPage\";\r\n\r\n$(document).ready(() => {\r\n    bootstrap();\r\n});\r\n\r\nfunction bootstrap() {\r\n    console.log(\"Starting bootstrapping procedure...\");\r\n\r\n    if ($(\".pxl-admin-page--city-create\").length > 0) {\r\n        console.log(\"Found \\\"Create city page\\\", start bootstrapping it...\");\r\n        let page = new CreateCityPage();\r\n        page.initPage();\r\n        console.log(\"Bootstrapping \\\"Create city page\\\" finished.\");\r\n    }\r\n\r\n    console.log(\"Bootstrapping procedure finished.\");\r\n}","﻿import { CreateOrEditCityPageBase } from \"./createOrEditCityPageBase\";\r\nimport { slugify } from \"../utilities/slugify\";\r\n\r\nexport class CreateCityPage extends CreateOrEditCityPageBase {\r\n    initPage() {\r\n        console.log(\"CreateCityPage.initPage\")\r\n        $(\"#Name\").change(function () {\r\n            $(\"#Slug\").val(slugify($(this).val()));\r\n        });\r\n\r\n        this.initMap();\r\n    }\r\n}","﻿import { Constants } from \"../utilities/constants\";\r\n\r\nexport abstract class CreateOrEditCityPageBase {\r\n\r\n    private mapElement: HTMLElement;\r\n\r\n    private map: google.maps.Map;\r\n    private marker: google.maps.Marker;\r\n    private geocoder: google.maps.Geocoder;\r\n\r\n    protected initialLatitude: number;\r\n    protected initialLongitude: number;\r\n\r\n    protected initMap() {\r\n        this.mapElement = $(\"#map\")[0];\r\n        this.geocoder = new google.maps.Geocoder();\r\n        this.map = new google.maps.Map(this.mapElement, {\r\n            zoom: 4,\r\n            center: { lat: 63.0, lng: 17.0 }\r\n        });\r\n\r\n        if (this.initialLatitude && this.initialLongitude) {\r\n            this.updateMap(new google.maps.LatLng(this.initialLatitude, this.initialLongitude));\r\n        }\r\n\r\n        $(\"#btnGetCoordinatesFromName\").click(() => {\r\n            const lookupAddress = this.getLookupAddress();\r\n            this.geocoder.geocode({ 'address': lookupAddress }, (results, status) => {\r\n                if (status === google.maps.GeocoderStatus.OK) {\r\n                    this.updateMap(results[0].geometry.location);\r\n                    this.updateLatLngTextboxes(results[0].geometry.location);\r\n                } else {\r\n                    console.log(`Kunde inte hitta position pga ${status}`);\r\n                }\r\n            });\r\n            return false;\r\n        });\r\n    }\r\n\r\n    private getLookupAddress(): string {\r\n        return $(\"#Name\").val();\r\n    }\r\n\r\n    private updateMap(location: google.maps.LatLng): void {\r\n        if (this.marker) {\r\n            this.marker.setPosition(location);\r\n        } else {\r\n            this.marker = new google.maps.Marker({\r\n                map: this.map,\r\n                position: location,\r\n                draggable: true\r\n            });\r\n            this.marker.addListener(\"dragend\", ev => {\r\n                this.updateLatLngTextboxes(ev.latLng);\r\n            });\r\n            this.map.setZoom(11);\r\n        }\r\n        this.map.setCenter(location);\r\n    }\r\n\r\n    private updateLatLngTextboxes(location: google.maps.LatLng): void  {\r\n        $(\"#Latitude\").val(location.lat().toLocaleString(Constants.locale, { maximumFractionDigits: 14 }));\r\n        $(\"#Longitude\").val(location.lng().toLocaleString(Constants.locale, { maximumFractionDigits: 14 }));\r\n    }\r\n}","﻿export class Constants {\r\n    static locale = \"sv\";\r\n}","﻿// https://gist.github.com/mathewbyrne/1280286\r\n\r\nexport function slugify(text: string) {\r\n    const a = \"àáåäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ·/_,:;\";\r\n    const b = \"aaaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------\";\r\n    const p = new RegExp(a.split(\"\").join(\"|\"), \"g\");\r\n\r\n    return text.toString().toLowerCase()\r\n        .replace(/\\s+/g, \"-\") // Replace spaces with -\r\n        .replace(p,\r\n            c =>\r\n            b.charAt(a.indexOf(c))) // Replace special chars\r\n        .replace(/&/g, \"-and-\")     // Replace & with 'and'\r\n        .replace(/[^\\w\\-]+/g, \"\")   // Remove all non-word chars\r\n        .replace(/\\-\\-+/g, \"-\")     // Replace multiple - with single -\r\n        .replace(/^-+/, \"\")         // Trim - from start of text\r\n        .replace(/-+$/, \"\");        // Trim - from end of text\r\n}"]}